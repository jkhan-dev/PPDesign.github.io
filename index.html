<!DOCTYPE html>
<html lang="en">

<head>
    <title>P&P</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Preload critical resources -->
    <link rel="preload" href="css/bootstrap.min.css" as="style" />
    <link rel="preload" href="css/custom.css" as="style" />
    <link rel="preload" href="css/video-slider.css" as="style" />
    <link rel="preload" href="js/jquery.min.js" as="script" />
    <link rel="preload" href="js/bootstrap.bundle.min.js" as="script" />
    <link rel="preload" href="js/video-slider.js" as="script" />
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
    
    <!-- Fonts and styles -->
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link href="css/slick.css" rel="stylesheet" />
    <link href="css/slick-theme.css" rel="stylesheet" />
    <link href="css/custom.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/video-slider.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body>
    <!-- main header start here -->
    <header class="main_header">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <nav class="navbar navbar-expand-sm">
                        <a class="navbar-brand" href="index.html">
                            <img src="images/logo.jpeg" alt="Main Logo" width="150" height="50" />
                        </a>

                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
                <span class="navbar-toggler-icon"></span>
                <span class="navbar-toggler-icon"></span>
              </button>

                        <div class="collapse navbar-collapse" id="collapsibleNavbar">
                            <ul class="navbar-nav">
                                <li class="nav-item">
                                    <a class="nav-link" href="index.html">Home</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="aboutus.html">About Us</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="orders.html">Our Orders</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="register.html">Register</a>
                                </li>
                            </ul>
                            <ul class="navbar-nav justify-content-end">
                                <li class="nav-item">
                                    <a class="nav-link" href="login.html">Log In</a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- main header end here -->
    
    <!-- Video Slider Hero Section Start -->
    <section class="hero-video-section">
        <div class="hero-video-container">
            <!-- Network interruption loader -->
            <div class="network-loader">
                <div class="loader-container">
                    <div class="loader-spinner"></div>
                    <div class="loader-text">Reconnecting to video stream...</div>
                </div>
            </div>
            
            <!-- Placeholder for error states only -->
            <div class="video-placeholder">
                <img src="https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Beauty Services" class="placeholder-image">
                <div class="loading-animation">
                    <div class="spinner"></div>
                    <p>Unable to load video</p>
                </div>
            </div>
            
            <video autoplay muted loop>
                <source src="./whatsa.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="hero-overlay"></div>
           
            <div class="video-controls">
                <button id="playPauseBtn" class="control-btn" aria-label="Play/Pause video">
                    <i class="fas fa-pause"></i>
                </button>
                <span id="videoTime" class="video-time">0:00</span>
                <button id="muteBtn" class="control-btn" aria-label="Mute/Unmute video">
                    <i class="fas fa-volume-mute"></i>
                </button>
            </div>
            <div class="video-progress-container">
                <div class="video-progress-bar" id="videoProgress"></div>
            </div>
        </div>
    </section> 
    <!-- Video Slider Hero Section End -->
    
    <!-- how to order section start -->
    <section class="how-to-order">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="title_wrapper">
                        <h2 class="section-title">How to Order</h2>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="order_items">
                        <img src="images/choose.png" alt="Choose Item" width="80" height="80" loading="lazy" />
                        <h3>Choose Item</h3>
                        <p>
                            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...
                        </p>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="order_items">
                        <img src="images/details.png" alt="Enter Details" width="80" height="80" loading="lazy" />
                        <h3>Enter Details</h3>
                        <p>
                            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...
                        </p>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="order_items">
                        <img src="images/commerce.png" alt="Review Order" width="80" height="80" loading="lazy" />
                        <h3>Review Order</h3>
                        <p>
                            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- how to order section end -->
    
    <!-- choose your size section start -->
    <section class="choose-size">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="title_wrapper">
                        <h2 class="section-title">Choose Your Size</h2>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="size-card">
                        <img src="images/card-img.jpg" alt="Frame 1" width="300" height="200" loading="lazy" />
                        <div class="card-content">
                            <h3>Frame 1</h3>
                            <p>Ut enim ad minim veniam, quis nostrud
                            </p>
                            <p class="price">&#8377;1000</p>
                            <ul class="feature-list">
                                <li>Frame Size : 23x34</li>
                                <li>Pictures : 1</li>
                            </ul>

                            <a href="./order-now.html" class="add_btn btn" style="width: 100%;">Choose Size</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="size-card">
                        <img src="images/card-img.jpg" alt="Frame 2" width="300" height="200" loading="lazy" />
                        <div class="card-content">
                            <h3>Frame 2</h3>
                            <p>Ut enim ad minim veniam, quis nostrud
                            </p>
                            <p class="price">&#8377;1179</p>
                            <ul class="feature-list">
                                <li>Frame Size : 23x34</li>
                                <li>Pictures : 1</li>
                            </ul>

                            <a href="#" class="add_btn btn" style="width: 100%;">Choose Size</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="size-card">
                        <img src="images/card-img.jpg" alt="Frame 3" width="300" height="200" loading="lazy" />
                        <div class="card-content">
                            <h3>Frame 3</h3>
                            <p>Ut enim ad minim veniam, quis nostrud
                            </p>
                            <p class="price">&#8377;2390</p>
                            <ul class="feature-list">
                                <li>Frame Size : 23x34</li>
                                <li>Pictures : 1</li>
                            </ul>

                            <a href="#" class="add_btn btn" style="width: 100%;">Choose Size</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="size-card">
                        <img src="images/card-img.jpg" alt="Frame 4" width="300" height="200" loading="lazy" />
                        <div class="card-content">
                            <h3>Frame 4</h3>
                            <p>Ut enim ad minim veniam, quis nostrud
                            </p>
                            <p class="price">&#8377;3500</p>
                            <ul class="feature-list">
                                <li>Frame Size : 23x34</li>
                                <li>Pictures : 1</li>
                            </ul>

                            <a href="#" class="add_btn btn" style="width: 100%;">Choose Size</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- choose your size section end -->
    
    <!-- Load remaining sections with JavaScript for better initial page load -->
    <div id="remaining-content"></div>

    <!-- Footer -->
    <footer class="footer_area">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="footer_nav">
                        <div class="row">
                            <div class="col-md-3">
                                <a href="index.html" class="footer_logo">
                                    <img src="images/logo.jpeg" alt="Footer Logo" width="150" height="50" />
                                </a>
                            </div>
                            <div class="col-md-9">
                                <ul class="nav">
                                    <li class="footer_nav_item">
                                        <a href="index.html">Home</a>
                                    </li>
                                    <li class="footer_nav_item">
                                        <a href="aboutus.html">About Us</a>
                                    </li>
                                    <li class="footer_nav_item">
                                        <a href="orders.html">Our Orders</a>
                                    </li>
                                    <li class="footer_nav_item">
                                        <a href="register.html">Register</a>
                                    </li>
                                    <li class="footer_nav_item">
                                        <a href="login.html">Log In</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- copy right footer section -->
                <div class="col-md-12">
                    <div class="copyright_wrapper">
                        <div class="row">
                            <div class="col-md-9">
                                <p>
                                    © 2024 Brand Inc.<a href="#">Privacy</a>
                                    <a href="#">Terms & Services</a>
                                </p>
                            </div>
                            <div class="col-md-3">
                                <ul class="nav">
                                    <li class="social_nav_item">
                                        <a href="#">
                                            <img src="images/twitter.png" alt="Twitter" width="24" height="24" loading="lazy" />
                                        </a>
                                    </li>
                                    <li class="social_nav_item">
                                        <a href="#">
                                            <img src="images/facebook.png" alt="Facebook" width="24" height="24" loading="lazy" />
                                        </a>
                                    </li>
                                    <li class="social_nav_item">
                                        <a href="#">
                                            <img src="images/linkedin.png" alt="Linkedin" width="24" height="24" loading="lazy" />
                                        </a>
                                    </li>
                                    <li class="social_nav_item">
                                        <a href="#">
                                            <img src="images/youtube.png" alt="Youtube" width="24" height="24" loading="lazy" />
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- copy right footer section -->
            </div>
        </div>
    </footer>
    <!-- footer area end -->

    <!-- Core Scripts -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <!-- GSAP for enhanced animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- Custom Scripts -->
    <script src="js/custom.js"></script>
    
    <!-- Lazy load remaining content -->
    <script>
        // Load remaining content after initial page load
        $(window).on('load', function() {
            setTimeout(function() {
                $('#remaining-content').load('remaining-content.html', function() {
                    // Initialize any scripts for the lazy-loaded content
                    if (typeof initSlick === 'function') {
                        initSlick();
                    }
                });
            }, 1000);
        });
        document.addEventListener('DOMContentLoaded', function() {
       
        
        // Video elements
        const videoContainer = document.querySelector('.hero-video-container');
        const video = document.querySelector('.hero-video-container video');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const muteBtn = document.getElementById('muteBtn');
        const progressBar = document.getElementById('videoProgress');
        const progressContainer = document.querySelector('.video-progress-container');
        const videoTimeDisplay = document.getElementById('videoTime');
        const videoPlaceholder = document.querySelector('.video-placeholder');
        const networkLoader = document.querySelector('.network-loader');
        const loaderText = document.querySelector('.loader-text');
        
        // Network state variables
        let networkInterrupted = false;
        let loadingTimeout;
        let reconnectAttempts = 0;
        const maxReconnectAttempts = 5;
        
        // Play/Pause button functionality
        playPauseBtn.addEventListener('click', function() {
            if (video.paused) {
                video.play()
                    .then(() => {
                        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                        videoContainer.classList.remove('video-paused');
                    })
                    .catch(error => {
                        console.error('Error playing video:', error);
                        // Show appropriate message for autoplay restrictions
                        if (error.name === 'NotAllowedError') {
                            loaderText.textContent = 'Click to play video';
                            videoContainer.classList.add('video-paused');
                        }
                    });
            } else {
                video.pause();
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                videoContainer.classList.add('video-paused');
            }
        });
        
        // Mute button functionality
        muteBtn.addEventListener('click', function() {
            video.muted = !video.muted;
            if (video.muted) {
                muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
            } else {
                muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            }
        });

        // Format time function
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            seconds = Math.floor(seconds % 60);
            return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }

        // Progress bar functionality
        video.addEventListener('timeupdate', function() {
            // If we're getting timeupdate events, the network is working
            if (networkInterrupted) {
                networkInterrupted = false;
                clearTimeout(loadingTimeout);
                videoContainer.classList.remove('video-loading');
                reconnectAttempts = 0;
            }
            
            const progress = (video.currentTime / video.duration) * 100;
            progressBar.style.width = progress + '%';
            
            // Update time display
            videoTimeDisplay.textContent = formatTime(video.currentTime);
        });
        
        // Click on progress bar to seek
        progressContainer.addEventListener('click', function(e) {
            const rect = this.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            video.currentTime = pos * video.duration;
        });
        
        // Double click on video to toggle fullscreen
        video.addEventListener('dblclick', function() {
            if (!document.fullscreenElement) {
                if (video.requestFullscreen) {
                    video.requestFullscreen();
                } else if (video.webkitRequestFullscreen) { /* Safari */
                    video.webkitRequestFullscreen();
                } else if (video.msRequestFullscreen) { /* IE11 */
                    video.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
            }
        });

        // Function to handle video sizing
        function handleVideoSize() {
            // Get the video's natural aspect ratio
            const videoRatio = video.videoWidth / video.videoHeight;
            
            // Get the container dimensions
            const container = document.querySelector('.hero-video-container');
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            
            // Check if we're on mobile
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                // On mobile, we want the video to fill the width
                video.style.width = '100%';
                video.style.height = 'auto';
                
                // If this makes the video too short, adjust to fill height instead
                if (video.offsetHeight < containerHeight) {
                    video.style.width = 'auto';
                    video.style.height = '100%';
                }
            } else {
                // On desktop, maintain portrait aspect ratio
                if (videoRatio < 1) {
                    // Portrait video - maintain height and adjust width
                    video.style.height = '100%';
                    video.style.width = 'auto';
                } else {
                    // If the video is actually landscape, we need to handle it differently
                    // Calculate the height needed to maintain the video's aspect ratio
                    const targetHeight = containerWidth / videoRatio;
                    
                    if (targetHeight <= containerHeight) {
                        // If the calculated height fits within the container
                        video.style.width = '100%';
                        video.style.height = 'auto';
                    } else {
                        // If the calculated height exceeds the container height
                        video.style.height = '100%';
                        video.style.width = 'auto';
                    }
                }
            }
        }
        
        // Network state monitoring
        function checkNetworkState() {
            // Check if the video is stalled or waiting
            if (video.networkState === 2) { // NETWORK_LOADING
                if (!networkInterrupted) {
                    networkInterrupted = true;
                    
                    // Show loading state after a short delay to avoid flickering
                    loadingTimeout = setTimeout(() => {
                        videoContainer.classList.add('video-loading');
                        loaderText.textContent = 'Reconnecting to video stream...';
                        
                        // Update message based on reconnect attempts
                        reconnectAttempts++;
                        if (reconnectAttempts > 1) {
                            loaderText.textContent = `Reconnecting to video stream... (Attempt ${reconnectAttempts})`;
                        }
                        
                        // After multiple attempts, suggest refreshing
                        if (reconnectAttempts >= maxReconnectAttempts) {
                            loaderText.textContent = 'Network issues detected. Video will resume automatically when connection improves.';
                        }
                    }, 1000); // Wait 1 second before showing loader
                }
            } else if (video.networkState === 3) { // NETWORK_NO_SOURCE
                clearTimeout(loadingTimeout);
                videoContainer.classList.add('video-error');
                videoContainer.classList.remove('video-loaded', 'video-loading');
                networkInterrupted = false;
            }
        }
        
        // Check network state periodically
        setInterval(checkNetworkState, 2000);
        
        // Call the function when the video metadata is loaded
        video.addEventListener('loadedmetadata', function() {
            handleVideoSize();
            videoContainer.classList.remove('video-loading');
            networkInterrupted = false;
        });
        
        // Also call it on window resize
        window.addEventListener('resize', handleVideoSize);
        
        // Handle loading event
        video.addEventListener('loadeddata', function() {
            console.log('Video loaded successfully');
            handleVideoSize(); // Ensure proper sizing once loaded
            
            // Initialize time display
            videoTimeDisplay.textContent = formatTime(0);
            
            // Mark video as loaded
            videoContainer.classList.add('video-loaded');
            videoContainer.classList.remove('video-loading', 'video-error');
            networkInterrupted = false;
            reconnectAttempts = 0;
        });
        
        // Handle waiting/buffering event
        video.addEventListener('waiting', function() {
            // Only show loading if it persists for more than a second
            if (!networkInterrupted) {
                networkInterrupted = true;
                loadingTimeout = setTimeout(() => {
                    videoContainer.classList.add('video-loading');
                    loaderText.textContent = 'Buffering video...';
                }, 1000);
            }
        });
        
        // Handle playing event
        video.addEventListener('playing', function() {
            clearTimeout(loadingTimeout);
            videoContainer.classList.add('video-loaded');
            videoContainer.classList.remove('video-loading', 'video-paused');
            networkInterrupted = false;
            reconnectAttempts = 0;
        });
        
        // Handle paused event
        video.addEventListener('pause', function() {
            videoContainer.classList.add('video-paused');
        });
        
        // Handle error event
        video.addEventListener('error', function(e) {
            console.error('Error loading video:', e);
            
            // Show error state
            videoContainer.classList.add('video-error');
            videoContainer.classList.remove('video-loaded', 'video-loading');
            
            // Fall back to image if video fails to load
            const heroSection = document.querySelector('.hero-video-section');
            heroSection.style.backgroundImage = "linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80')";
            heroSection.style.backgroundSize = 'cover';
            heroSection.style.backgroundPosition = 'center';
        });
        
        // Handle video end - loop manually to ensure progress bar resets
        video.addEventListener('ended', function() {
            video.currentTime = 0;
            video.play().catch(error => {
                console.error('Error replaying video:', error);
                videoContainer.classList.add('video-paused');
            });
        });
        
        // Handle slow connection or stalled video
        video.addEventListener('stalled', function() {
            if (!networkInterrupted) {
                networkInterrupted = true;
                loadingTimeout = setTimeout(() => {
                    videoContainer.classList.add('video-loading');
                    loaderText.textContent = 'Network interrupted. Reconnecting...';
                }, 1000);
            }
        });
        
        // Handle network online/offline events
        window.addEventListener('online', function() {
            if (networkInterrupted) {
                loaderText.textContent = 'Connection restored. Resuming video...';
                // Try to resume the video
                setTimeout(() => {
                    video.play().catch(error => {
                        console.error('Error resuming video:', error);
                    });
                }, 1000);
            }
        });
        
        window.addEventListener('offline', function() {
            networkInterrupted = true;
            videoContainer.classList.add('video-loading');
            loaderText.textContent = 'Network connection lost. Waiting to reconnect...';
        });
    });
    </script>
</body>

</html>